---
title: NAT的分类
author: starifly
date: 2020-10-02T17:44:20+08:00
lastmod: 2020-10-02T17:44:20+08:00
categories: [网络]
tags: [网络,nat]
draft: true
slug: types-of-nat
---

NAT 从表面上看有三种类型：静态 NAT、动态地址 NAT、地址端口转换 NAPT

- 静态 NAT：静态地址转换，将内部私网地址与合法公网地址进行一对一的转换，且每个内部地址的转换都是确定的。
- 动态 NAT：动态地址转换也是将内部本地地址与外部合法地址一对一的转换，但是动态地址转换是从合法地址池中动态选择一个未使用的地址来对内部私有地址进行转换，
- NAPT：它也是一种动态转换，而且多个内部地址被转换成同一个合法公网地址，使用不同的端口号来区分不同的主机，不同的进程。

从实现的技术角度，又可以将 NAT 分成如下几类：全锥形 NAT（Full Cone NAT）、限制锥形 NAT（Restricted Cone NAT）、端口限制锥形 NAT（Port Restricted Cone NAT）、对称 NAT（Symmetric NAT）。

- 全锥形 NAT：全锥形 NAT 把所有来自相同内部 IP 地址和端口的请求映射到相同的外部 IP 地址和端口。任何一个外部主机均可通过该映射发送数据包到该内部主机。
- 限制锥形 NAT：限制锥形 NAT 把所有来自相同内部 IP 地址和端口的请求映射到相同的外部 IP 地址和端口。但是，和全锥形 NAT 不同的是：只有当内部主机先给外部主机发送数据包，该外部主机才能向该内部主机发送数据包。
- 端口限制锥形 NAT：端口限制锥形 NAT 和限制锥形 NAT 类似，只是多了端口号的限制，即只有内部主机先向外部地址:端口号对发送数据包，该外部主机才能使用特定的端口号向内部主机发送数据包。
- 对称 NAT：对称 NAT 与上述3种类型都不同，不管是全锥形 NAT、限制锥形 NAT还是端口限制锥形 NAT，它们都属于锥 NAT。当同一内部主机使用相同的端口与不同地址的外部主机进行通信时，对称 NAT 会重新建立一个 Session，为这个 Session 分配不同的端口号，或许还会改变 IP 地址。

## Reference

- [各种nat类型](http://www.360doc.com/content/13/0708/19/9523427_298537379.shtml#)
- [P2P技术详解(一)：NAT详解——详细原理、P2P简介](http://www.52im.net/thread-50-1-1.html)
